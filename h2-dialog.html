<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../neon-animation/web-animations.html">
<link rel="import" href="../neon-animation/animations/scale-up-animation.html">
<link rel="import" href="../neon-animation/animations/fade-out-animation.html">
<dom-module id="h2-dialog">
    <template>
        <style>
            :host paper-dialog {
                min-width: 85%;
                min-height: 80%;
            }
        </style>
        <paper-dialog id="dialog"
                      modal
                      entry-animation="scale-up-animation"
                      exit-animation="fade-out-animation">
            <paper-dialog-scrollable>
                <slot name="content"></slot>
            </paper-dialog-scrollable>
        </paper-dialog>

    </template>
    <script>
      class H2Dialog extends Polymer.Element {

        static get is() {
          return "h2-dialog";
        }

        connectedCallback() {
          super.connectedCallback();

          this.addEventListener('iron-overlay-closed', e => {
            // ignore 'iron-overlay-closed' event fired by other element
            if (e.path[0] != this.$.dialog) return;
            e.stopPropagation();
            this.dispatchEvent(new CustomEvent('dialog-closed'), {
              composed: true,
              bubbles: true
            });
            setTimeout(() => {
              this.parentElement.removeChild(this);
            }, 100);
          });
        }

        open() {
          this.$.dialog.open();
        }

        close() {
          this.$.dialog.close();
        }

      }
      customElements.define(H2Dialog.is, H2Dialog);
    </script>
</dom-module>